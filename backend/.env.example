# Backend environment variables for PixelCraft AI Backend
# Copy this file to `.env` and fill secrets. Do NOT commit your real `.env` to source control.

## Application Settings
APP_ENV=development                # development | production
APP_HOST=0.0.0.0                   # Host to bind the FastAPI server
APP_PORT=8000                      # Server port (1024-65535)
CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173  # Comma-separated allowed origins
LOG_LEVEL=INFO                     # DEBUG | INFO | WARNING | ERROR

## Ollama Configuration
OLLAMA_HOST=http://localhost:11434  # URL where Ollama is running (default: http://localhost:11434)
OLLAMA_MODEL=llama3                # Default model to use (default: llama3)
OLLAMA_KEEP_ALIVE=10m              # Keep-alive duration (default: 10m)
OLLAMA_TEMPERATURE=0.7             # Generation temperature (default: 0.7)
OLLAMA_STREAM=true                 # Enable streaming by default

MODEL_CACHE_TTL=3600              # Response cache duration in seconds
MODEL_HEALTH_CHECK_INTERVAL=300    # Health check frequency in seconds
MODEL_REQUEST_TIMEOUT=30           # Request timeout in seconds
MODEL_MAX_RETRIES=3                # Maximum retry attempts for failed requests
MODEL_WARMUP_ON_STARTUP=true       # Enable model warmup on startup

## HuggingFace Configuration (Optional Fallback)
HUGGINGFACE_API_KEY=your-huggingface-api-key-here  # Optional API key for HuggingFace models as fallback

## Supabase Configuration
# Use the Supabase service role key for backend operations (NEVER expose to frontend).
SUPABASE_URL=https://ozqpzwwpgyzlxhtekywj.supabase.co
SUPABASE_KEY=your-service-role-key-here
# Get this from Supabase Dashboard > Settings > API > JWT Secret
SUPABASE_JWT_SECRET=your-jwt-secret-here

## API Configuration (for docs/examples)
# Base URL and JWT secret used by clients/tests. Do not commit real secrets.
API_URL=http://localhost:8000
API_JWT_SECRET=replace-with-dev-secret

## Optional Services
REDIS_URL=redis://localhost:6379/0
# REDIS_URL: Required for real-time analytics updates via WebSocket. If not set, WebSocket will work but without pub/sub broadcasting.

## External API Integrations (Optional)
# External API integrations are optional. If not configured, agents will skip external tool calls gracefully.
# To enable CRM integration: Create a HubSpot Private App (Settings > Integrations > Private Apps) and copy the access token.
# To enable email: Create a SendGrid API key (Settings > API Keys) with Mail Send permissions.
# To enable calendar: Create a Google Cloud project, enable Calendar API, and generate an API key or OAuth credentials.

CRM_PROVIDER=hubspot
# CRM provider: hubspot | salesforce
CRM_API_KEY=your-crm-api-key-here
# HubSpot Private App token or Salesforce API key
CRM_API_URL=https://api.hubapi.com
# CRM API base URL (default for HubSpot)

EMAIL_PROVIDER=sendgrid
# Email provider: sendgrid | mailgun
EMAIL_API_KEY=your-sendgrid-api-key-here
# SendGrid API key from dashboard
EMAIL_FROM=noreply@pixelcraft.com
# Default sender email address

CALENDAR_PROVIDER=google
# Calendar provider: google | outlook
CALENDAR_API_KEY=your-google-calendar-api-key-here
# Google Calendar API key or OAuth token
CALENDAR_ID=primary
# Calendar ID to use (default: primary)

## Stripe Payments (optional until enabled)
# Required for Stripe API calls (server-side secret key)
STRIPE_API_KEY=sk_live_or_test_key_here
# Webhook signing secret from Stripe Dashboard → Developers → Webhooks
STRIPE_WEBHOOK_SECRET=whsec_...
# Default price to use when client does not pass one
STRIPE_PRICE_ID=price_12345
# Checkout mode: subscription | payment
STRIPE_MODE=subscription
# URLs to redirect after checkout (frontend pages)
STRIPE_SUCCESS_URL=http://localhost:5173/payments/success
STRIPE_CANCEL_URL=http://localhost:5173/payments/cancel

## Sentry Error Monitoring (Optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id  # Get this from Sentry.io project settings
SENTRY_ENVIRONMENT=development                           # Environment name: development | staging | production
SENTRY_TRACES_SAMPLE_RATE=0.1                            # Performance monitoring sample rate, 0.0 to 1.0, default 0.1 for 10%
SENTRY_PROFILES_SAMPLE_RATE=0.1                          # Profiling sample rate, 0.0 to 1.0, default 0.1 for 10%
SENTRY_RELEASE=pixelcraft-backend@1.0.0                  # Release version for tracking, typically from git commit or version tag
SENTRY_ENABLE_TRACING=true                               # Enable performance tracing
# Sentry is optional and will only activate if SENTRY_DSN is set.
# To obtain a Sentry DSN: Log in to Sentry.io, create a new project (or select an existing one), navigate to Project Settings > Client Keys (DSN), and copy the DSN value.

# Additional notes:
# - OLLAMA_HOST: If running Ollama locally, the default port is 11434.
# - Ollama Models: Before running the application, pull the required models using:
#   ollama pull llama3
#   ollama pull mistral
#   ollama pull codellama
# - HuggingFace API Key: Optional for fallback models when Ollama is unavailable.
# - SUPABASE_KEY: Prefer using a dedicated service role key scoped to the backend.
# - SUPABASE_JWT_SECRET: Required for API authentication to work properly.
# - CORS_ORIGINS: Add production frontend domain(s) when deploying.
# - Stripe: Use test keys in development. Configure webhooks to POST to /api/payments/webhook.

# Notifications are automatically enabled when Redis is configured
# Real-time notifications use WebSocket at /api/ws/notifications
# Notification events are published to Redis channels: notifications:user:{user_id}
